---
import { Icon } from 'astro-icon/components';

interface Props {
  text?: string;
  link?: string;
  label?: string;  // legacy
  url?: string;    // legacy
  variant?: 'solid' | 'outline';
  color?: 'blue' | 'green' | 'red' | 'purple' | 'gray';
  size?: 'sm' | 'md' | 'lg';
  external?: boolean;
  icon?: string;
  iconPosition?: 'left' | 'right';
}

const { 
  text, link, label, url,
  variant = 'solid', 
  color = 'blue',
  size = 'md',
  external = false,
  icon,
  iconPosition = 'left'
} = Astro.props;

const btnText = text || label || '';
const btnLink = link || url || '#';

const sizes = { sm: 'text-sm px-3 py-1.5', md: 'px-4 py-2', lg: 'text-lg px-5 py-2.5' };
const iconSizes = { sm: 'w-4 h-4', md: 'w-5 h-5', lg: 'w-6 h-6' };

const colors = {
  blue: { solid: 'bg-blue-600 hover:bg-blue-700 text-white', outline: 'border-blue-600 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20' },
  green: { solid: 'bg-green-600 hover:bg-green-700 text-white', outline: 'border-green-600 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20' },
  red: { solid: 'bg-red-600 hover:bg-red-700 text-white', outline: 'border-red-600 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20' },
  purple: { solid: 'bg-purple-600 hover:bg-purple-700 text-white', outline: 'border-purple-600 text-purple-600 hover:bg-purple-50 dark:hover:bg-purple-900/20' },
  gray: { solid: 'bg-gray-600 hover:bg-gray-700 text-white', outline: 'border-gray-600 text-gray-600 hover:bg-gray-50 dark:hover:bg-gray-900/20' },
};
---

<a
  href={btnLink}
  class:list={[
    'not-prose inline-flex items-center gap-2 rounded-md font-medium transition-colors',
    sizes[size],
    colors[color][variant],
    variant === 'outline' && 'border-2'
  ]}
  {...external && { target: '_blank', rel: 'noopener noreferrer' }}
>
  {icon && iconPosition === 'left' && <Icon name={`mdi:${icon}`} class={iconSizes[size]} />}
  {btnText}
  {icon && iconPosition === 'right' && <Icon name={`mdi:${icon}`} class={iconSizes[size]} />}
</a>
