---
interface Props {
  title: string;
  description?: string;
  url?: string;
}

const { title, description = '', url = Astro.url.href } = Astro.props;

const encodedUrl = encodeURIComponent(url);
const encodedTitle = encodeURIComponent(title);
const encodedDesc = encodeURIComponent(description);

const platforms = [
  { name: 'Twitter', url: `https://twitter.com/intent/tweet?text=${encodedTitle}&url=${encodedUrl}`, icon: 'M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z' },
  { name: 'Facebook', url: `https://www.facebook.com/sharer/sharer.php?u=${encodedUrl}`, icon: 'M9.198 21.5h4v-8.01h3.604l.396-3.98h-4V7.5a1 1 0 0 1 1-1h3v-4h-3a5 5 0 0 0-5 5v2.01h-2l-.396 3.98h2.396v8.01Z' },
  { name: 'LinkedIn', url: `https://www.linkedin.com/sharing/share-offsite/?url=${encodedUrl}`, icon: 'M6.94 5a2 2 0 1 1-4-.002 2 2 0 0 1 4 .002zM7 8.48H3V21h4V8.48zm6.32 0H9.34V21h3.94v-6.57c0-3.66 4.77-4 4.77 0V21H22v-7.93c0-6.17-7.06-5.94-8.72-2.91l.04-1.68z' },
  { name: 'Reddit', url: `https://reddit.com/submit?url=${encodedUrl}&title=${encodedTitle}`, icon: 'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5.8 10c0 .43-.14.83-.38 1.16.02.15.03.3.03.46 0 2.35-2.74 4.26-6.11 4.26s-6.11-1.91-6.11-4.26c0-.16.01-.31.03-.46-.24-.33-.38-.73-.38-1.16 0-1.07.87-1.94 1.94-1.94.49 0 .93.18 1.28.48 1.04-.64 2.4-1.05 3.9-1.1l.77-3.57 2.48.53c.09-.52.54-.91 1.08-.91.6 0 1.08.49 1.08 1.08 0 .6-.49 1.08-1.08 1.08-.52 0-.95-.37-1.05-.86l-2.1-.45-.63 2.93c1.45.07 2.77.47 3.78 1.1.35-.3.8-.48 1.28-.48 1.07 0 1.94.87 1.94 1.94zM9.2 13c-.6 0-1.08.49-1.08 1.08s.49 1.08 1.08 1.08 1.08-.49 1.08-1.08S9.8 13 9.2 13zm5.6 0c-.6 0-1.08.49-1.08 1.08s.49 1.08 1.08 1.08 1.08-.49 1.08-1.08S15.4 13 14.8 13zm-5.22 3.54c-.12-.12-.12-.31 0-.43.12-.12.31-.12.43 0 .65.65 1.6.97 2.57.97s1.92-.32 2.57-.97c.12-.12.31-.12.43 0 .12.12.12.31 0 .43-.77.77-1.86 1.17-3 1.17s-2.23-.4-3-.97z' },
  { name: 'WhatsApp', url: `https://wa.me/?text=${encodedTitle}%20${encodedUrl}`, icon: 'M17.6 6.32A7.85 7.85 0 0 0 12.05 4c-4.38 0-7.93 3.55-7.93 7.93a7.9 7.9 0 0 0 1.07 3.98L4 20l4.19-1.1a7.9 7.9 0 0 0 3.77.96h.01c4.38 0 7.93-3.55 7.93-7.93 0-2.12-.82-4.1-2.3-5.6Zm-5.55 12.18a6.57 6.57 0 0 1-3.35-.92l-.24-.14-2.5.65.67-2.43-.16-.25a6.59 6.59 0 0 1-1.01-3.49c0-3.64 2.96-6.6 6.6-6.6a6.56 6.56 0 0 1 6.59 6.59c0 3.65-2.96 6.6-6.6 6.6Zm3.62-4.94c-.2-.1-1.18-.58-1.36-.64-.18-.07-.32-.1-.45.1-.13.2-.5.64-.62.77-.11.13-.23.15-.43.05-.2-.1-.85-.31-1.62-.99-.6-.53-1-1.2-1.12-1.4-.12-.2-.01-.31.09-.41.09-.09.2-.23.3-.35.1-.12.13-.2.2-.34.07-.13.03-.25-.02-.35-.05-.1-.45-1.08-.62-1.48-.16-.39-.33-.33-.45-.34-.12-.01-.25-.01-.38-.01-.13 0-.34.05-.52.25-.18.2-.68.67-.68 1.63 0 .96.7 1.9.8 2.03.1.13 1.4 2.13 3.39 2.99.47.2.84.33 1.13.42.48.15.91.13 1.25.08.38-.06 1.18-.48 1.35-.95.17-.47.17-.87.12-.95-.05-.09-.19-.14-.4-.24Z' },
  { name: 'Email', url: `mailto:?subject=${encodedTitle}&body=${encodedDesc}%0A%0A${encodedUrl}`, icon: 'M3 5h18a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1zm17 2.4-8 5.6-8-5.6V17h16V7.4zM4.2 6l7.8 5.5L19.8 6H4.2z' },
];
---

<div class="my-8 py-6 border-y border-gray-200 dark:border-gray-700">
  <p class="text-center text-lg font-medium mb-4">Share this article</p>
  <div class="flex justify-center gap-2">
    {platforms.map(({ name, url, icon }) => (
      <a 
        href={url} 
        target="_blank" 
        rel="noopener noreferrer"
        class="w-10 h-10 flex items-center justify-center rounded-full bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-blue-100 dark:hover:bg-blue-900 hover:text-blue-600 dark:hover:text-blue-400 transition-colors"
        aria-label={`Share on ${name}`}
      >
        <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor"><path d={icon}/></svg>
      </a>
    ))}
  </div>
</div>
